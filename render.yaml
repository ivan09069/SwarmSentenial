services:
  - type: worker
    name: swarmsentinel-v3
    env: python
    region: oregon
    plan: starter
    buildCommand: pip install -r requirements_hardened.txt
    startCommand: python main_hardened.py
    envVars:
      # Required
      - key: XAI_API_KEY
        sync: false
      # Optional alerts
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: TELEGRAM_CHAT_ID
        sync: false
      # Config with secure defaults
      - key: SIM_MODE
        value: "True"
      - key: POLL_INTERVAL
        value: "60"
      - key: XAI_MODEL
        value: "grok-3-fast"
    healthCheckPath: /tmp/swarmsentinel_heartbeat.json
